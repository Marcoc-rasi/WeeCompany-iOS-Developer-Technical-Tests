# Países
Esta aplicación es una sofisticada aplicación de iOS diseñada para `buscar` y mostrar información detallada sobre los `países`. Aquí tienes una visión general profesional de su funcionalidad:

# Características Principales
- `Búsqueda de Países`: Los usuarios pueden buscar países por nombre a través de un `UISearchBar` integrado en la barra de navegación. La aplicación es compatible con versiones de iOS `11.0` y superiores con capacidades de búsqueda mejoradas, incluido un requisito de no capitalización para las entradas de búsqueda para mejorar la experiencia del usuario.
- `Búsquedas Recientes`: La aplicación mantiene un historial de búsquedas recientes, lo que permite a los usuarios revisitar rápidamente consultas anteriores. Esta característica mejora la usabilidad al reducir la necesidad de volver a escribir términos buscados con frecuencia.
- `Visualización de Detalles del País`: Tras una búsqueda exitosa, la aplicación presenta información detallada sobre el país, incluido su nombre común, nombre oficial, capital, moneda y bandera. Esta información se carga dinámicamente y se muestra en una interfaz fácil de usar.
- `Visualización Interactiva de la Bandera`: Los usuarios pueden interactuar con la imagen de la bandera del país para acceder a opciones adicionales, como ver la bandera en pantalla completa o abrirla en Safari para una inspección más detallada.
- `Navegación e Interacción del Usuario`: La aplicación emplea transiciones modales y segues para navegar entre diferentes vistas, incluida una vista de búsquedas recientes y un visor de imágenes en pantalla completa. Utiliza `UIAlertControllers` para proporcionar retroalimentación o acciones al usuario, como la opción de cancelar o proceder con ciertas operaciones.

# Aspectos Técnicos Destacados
- `Obtención Asincrónica de Datos`: La aplicación aprovecha el modelo de concurrencia de Swift para realizar solicitudes de red de forma asincrónica, obteniendo detalles de países e imágenes de banderas sin bloquear el hilo de la interfaz de usuario. Este enfoque garantiza una experiencia de usuario fluida y receptiva.
- `Manejo de Errores y Retroalimentación al Usuario`: Mediante el uso de bloques try-catch y `UIAlertControllers`, la aplicación maneja de manera sólida los errores (por ejemplo, fallas en la carga de imágenes o búsquedas sin resultados) e informa adecuadamente al usuario, manteniendo un alto nivel de usabilidad incluso cuando surgen problemas inesperados.
- `Diseño de IU Adaptativa`: La aplicación incluye consideraciones para diferentes tipos de dispositivos, como la implementación de controladores de presentación emergente para iPads para garantizar un diseño y patrones de interacción óptimos en todos los dispositivos iOS.
- `Organización y Modularidad del Código`: La funcionalidad está encapsulada dentro de métodos y extensiones bien definidos, siguiendo los principios de encapsulación y separación de preocupaciones. Esta modularidad facilita el mantenimiento del código y futuras mejoras.

# Arquitectura de la Aplicación

# Arquitectura de aplicaciones

## Modelo
| Clase | Descripción |
|----------------------------|-------------------- ------------------------------------------|
| `País.swift` | La estructura "País" representa el modelo de datos para la información de un país, diseñado para una fácil codificación y decodificación con el protocolo "Codable". Incluye varias propiedades como "nombre", "capital", "monedas", "banderas" y "mapas". **Nombre**: la estructura "Nombre" anidada almacena los nombres comunes y oficiales del país. **Moneda**: la estructura "Moneda" anidada representa la información monetaria de un país, incluido el nombre y el símbolo opcional. **Flags**: la estructura "Flags" anidada contiene las URL de las imágenes de las banderas del país, centrándose en el formato PNG. **Mapas**: la estructura `Maps` contiene URL de varios servicios de mapas y actualmente solo almacena la URL de Google Maps. Está diseñado para una posible expansión para incluir más URL de servicios de mapas en el futuro. Mediante la adhesión al protocolo "Codable", "Country" facilita la conversión directa entre formatos de objetos y datos, lo que permite un manejo fluido de datos en red o almacenamiento de datos local. |
| `CountrySearch.swift` | La clase `CountrySearch` es un modelo diseñado para almacenar información relacionada con una operación de búsqueda de país. Implementa el protocolo "Codable" para permitir una fácil codificación y decodificación desde y hacia formatos de datos como JSON, lo que lo hace adecuado para almacenamiento local o transmisión de red. Esta clase contiene una propiedad `countryNameSearched` que almacena el nombre del país buscado, facilitando la visualización de búsquedas recientes y la repetición de búsquedas sin necesidad de volver a escribir el nombre del país. |
| `RecentSearchStorage.swift`| La clase `RecentSearchStorage` sirve como una utilidad para administrar búsquedas recientes de países, utilizando archivos de lista de propiedades (plist) para almacenamiento y el protocolo `Codable` para codificación y decodificación de objetos. Genera dinámicamente una URL para el archivo plist dentro del directorio de Documentos de la aplicación. Esta clase proporciona métodos para guardar y cargar búsquedas recientes. **Guardar búsquedas recientes**: El método `saveRecentSearches` codifica una matriz de objetos `CountrySearch` en un formato plist y lo escribe en la ubicación especificada. En caso de algún error durante este proceso, proporciona mensajes de error informativos para la depuración. **Cargando búsquedas recientes**: El método `loadRecentSearches` recupera una matriz de objetos `CountrySearch` del archivo plist. Si el archivo no existe o la decodificación encuentra un error, devuelve elegantemente una matriz vacía. A través de estas funcionalidades, `RecentSearchStorage` garantiza una gestión eficiente y la persistencia de las búsquedas recientes, lo que contribuye a mejorar la usabilidad y la integridad de los datos dentro de la aplicación. |

## Vista
| Clase | Descripción |
|----------------------------|-------------------- ------------------------------------------|
| `Todos los paísesTableViewCell`| La clase `AllCountriesTableViewCell` está diseñada específicamente para presentar información detallada sobre un país dentro de una celda de vista de tabla. Cuenta con salidas para varios componentes de la interfaz de usuario, como etiquetas y una vista de imágenes para mostrar de manera efectiva los datos del país. El método `awakeFromNib()` realiza cualquier configuración adicional después de cargar la vista, normalmente desde una plumilla. El método `setSelected(_:animated:)` configura la vista para el estado seleccionado, si es necesario. El método `update(with:image:)` actualiza las vistas de la celda con datos de un país específico, incluida la imagen de su bandera. Toma un objeto "País" y la imagen de la bandera como parámetros. El método `updateBad()` configura la celda para indicar que la información sobre el país no está disponible, normalmente se llama cuando hay un error al obtener datos del país o cuando faltan datos. A través de estos métodos, `AllCountriesTableViewCell` facilita la presentación de la información del país dentro de una vista de tabla, lo que garantiza una experiencia de usuario fluida e informativa. |

## Controlador
| Clase | Descripción |
|------------------------------------------|--------- -------------------------------------------------- ---|
| `AllCountriesTableViewController.swift` | La clase `AllCountriesTableViewController` gestiona la visualización de países y su información en una vista de tabla. Obtiene datos del país, incluidas imágenes, y actualiza la interfaz de usuario en consecuencia. En el método `viewDidLoad()`, el controlador comienza a monitorear los cambios de la red y carga los datos iniciales usando el método `loadData()`. El método `loadData()` recupera datos e imágenes del país de forma asíncrona, actualizando la interfaz de usuario con los datos obtenidos o mostrando un mensaje de error si falla la recuperación de datos. El método `updateUI(with:)` actualiza la interfaz de usuario de la vista de tabla con los datos del país obtenidos, recargando la vista de tabla para mostrar los nuevos datos. El método `showAlert(title:message:)` muestra una alerta con un título y mensaje específicos. En el método `tableView(_:cellForRowAt:)`, el controlador configura las celdas en función de si hay datos disponibles o no. Si no hay datos disponibles, configura la celda para mostrar información predeterminada no disponible. El método `tableView(_:willSelectRowAt:)` permite la selección de filas solo si hay una conexión a Internet y los datos no se cargan. En el método `prepare(for:sender:)`, el controlador se prepara para la transición al `DetailCountryViewController`, pasando el país seleccionado y su imagen si hay una conexión a Internet y los datos no se cargan. El método `observeNetworkChanges()` configura un controlador de cambios de estado de la red para responder a los cambios de conectividad, actualizando la interfaz de usuario e intentando recargar datos cuando cambia el estado de la conexión. |
| `DetalleCountryViewController.swift` | La clase `DetailCountryViewController` es responsable de mostrar información detallada sobre un país seleccionado. Incluye los nombres comunes y oficiales del país, la capital, la moneda y una imagen. Además, hay un botón para ver la ubicación del país en Google Maps. En los métodos `viewDidLoad()` y `viewWillAppear(_:)`, los elementos de la interfaz de usuario se configuran con la información del país, lo que garantiza que las etiquetas se actualicen y que la vista de la imagen muestre la imagen del país o un marcador de posición. El método `setupUI()` actualiza los elementos de la interfaz de usuario con la información del país, manejando casos en los que pueden faltar datos. Establece etiquetas con el nombre del país, la capital y la información de la moneda. Si está disponible, también configura la vista de la imagen con la imagen de la bandera del país; de lo contrario, utiliza una imagen de marcador de posición predeterminada. El método `mapsButtonTapped(_:)` se activa cuando se toca el botón de mapas. Intenta abrir la ubicación del país en Google Maps utilizando la URL de Google Maps del país. El método `imageTapped(_:)` se activa cuando se toca la imagen. Presenta una hoja de acciones con opciones relacionadas con la imagen del país, como abrir la imagen en Safari o verla en pantalla completa dentro de la aplicación. El método `prepare(for:sender:)` se prepara para la transición a `FullscreenImageViewController`, pasando la imagen del país que se mostrará en modo de pantalla completa. |
| `BuscarPaísesPorNombreViewController.swift` | La clase `FindCountriesByNameViewController` gestiona la búsqueda y visualización de información de países dentro de un UIViewController personalizado. Contiene salidas para que los elementos de la interfaz de usuario presenten detalles del país e interacciones, como ver mapas. La clase incluye propiedades para almacenar los detalles del país encontrado y el historial de búsqueda reciente. En `viewDidLoad()`, se cargan las búsquedas recientes y se configura una UISearchBar mediante programación o mediante el elemento de navegación según la versión de iOS. El método `configureInitialState()` establece el estado visual inicial de la interfaz de usuario. El método `searchBarSearchButtonClicked(_:)` maneja los clics en el botón de búsqueda, iniciando una búsqueda con el texto proporcionado. El método `performSearch(with:)` obtiene de forma asincrónica detalles del país según el texto de búsqueda y actualiza la interfaz de usuario en consecuencia, manejando errores y guardando búsquedas recientes. El método `updateUI(with:)` actualiza la interfaz de usuario con detalles del país encontrado, incluida su imagen. El método `loadCountryImage(_:)` carga y muestra de forma asincrónica la imagen de la bandera del país desde una URL. El método `imageViewTapped(_:)` maneja gestos de toque en la imagen de la bandera del país, presentando una hoja de acción con opciones para ver la imagen en Safari o en pantalla completa. El método `prepare(for:sender:)` se prepara para las transiciones, pasando datos a los controladores de vista de destino. El método `showNoResultsAlert()` muestra una alerta si no se encuentran resultados de búsqueda. El método `recentsBarButtonTapped(_:)` activa una transición modal al controlador de vista Búsquedas recientes cuando se toca un botón de la barra. La extensión `RecentSearchesDelegate` maneja selecciones de la lista de búsquedas recientes, realizando una búsqueda utilizando el término de búsqueda reciente seleccionado. |
| `Pantalla completaImageViewController.swift` | La clase `FullscreenImageViewController` está diseñada para presentar una imagen en modo de pantalla completa, lo que permite a los usuarios verla sin distorsión. Contiene una salida para una vista de imagen para mostrar la imagen. En `viewDidLoad()`, la imagen pasada se asigna a la vista de imagen y su modo de contenido se establece en `scaleAspectFit` para garantizar una escala proporcional sin distorsión. Esta configuración garantiza que la imagen se ajuste a los límites de la vista sin estirarse ni aplastarse, proporcionando una experiencia de visualización perfecta en pantalla completa. |
| `RecentSearchesTableViewController.swift` | La clase `RecentSearchesTableViewController` gestiona la visualización y la interacción de una lista que muestra consultas de búsqueda de países recientes. Incluye una matriz `recentSearches` para almacenar los nombres de búsquedas recientes y un `delegate` para manejar acciones de selección en búsquedas recientes, conforme a `RecentSearchesDelegate` para comunicar eventos de selección al controlador de vista delegado. En `viewDidLoad()`, las búsquedas recientes se cargan desde el almacenamiento y, si no existe ninguna, se presenta un mensaje predeterminado. El método `loadRecentSearches()` carga búsquedas recientes desde el almacenamiento persistente y las asigna a una matriz de cadenas para su visualización. Los métodos de fuente de datos de la vista de tabla (`tableView(_:numberOfRowsInSection:)` y `tableView(_:cellForRowAt:)`) se implementan para determinar el número de filas necesarias en la vista de tabla y configurar cada celda con la búsqueda reciente correspondiente. cadena. El método delegado de vista de tabla `tableView(_:didSelectRowAt:)` maneja la selección de una búsqueda reciente, informa al delegado de la búsqueda seleccionada y descarta el controlador de vista después de realizar una selección, asumiendo que este controlador de vista se presenta modalmente. A través de estos métodos, `RecentSearchesTableViewController` proporciona una interfaz fácil de usar para ver y seleccionar consultas de búsqueda de países recientes. |

## Red
| Clase | Descripción |
|---------------------------|--------------------- -----------------------------------------|
| `ApiRequest.swift` | La clase `APIRequestController` sirve como un componente crucial responsable de gestionar las solicitudes de red para recuperar información del país y sus correspondientes imágenes de bandera. Encapsula varios métodos asincrónicos diseñados para interactuar con API externas y manejar con elegancia posibles errores que puedan surgir durante el proceso de obtención de datos. En esencia, `APIRequestController` define la enumeración `CountryInfoError`, que describe los posibles errores que podrían ocurrir durante la recuperación de datos. Estos errores incluyen "itemNotFound", que indica que no se encontró el elemento solicitado, e "imageDataMissing", que indica datos de imagen faltantes o dañados para la bandera de un país. La clase ofrece tres métodos asincrónicos principales: El método `fetchCountryInfo()` recupera de forma asincrónica la lista completa de países desde un punto final API específico. Emplea "URLSession" para realizar la solicitud de red y decodifica la respuesta JSON en una matriz de objetos "País". En caso de falla en la recuperación de datos, arroja un error "CountryInfoError.itemNotFound". El método `fetchFlagImage(from url: URL)`, dada una URL que apunta a una imagen de bandera, recupera de forma asincrónica los datos de la imagen usando `URLSession`. Garantiza que el código de estado de respuesta HTTP sea 200 (lo que indica éxito) e intenta crear una "UIImage" a partir de los datos recibidos. Si se produce algún error durante el proceso, como no poder recuperar o decodificar los datos de la imagen, se genera un error "CountryInfoError.imageDataMissing". El método `fetchInfoAndImages()` combina las funcionalidades de `fetchCountryInfo()` y `fetchFlagImage(from:)`. Obtiene de forma asincrónica información del país usando `fetchCountryInfo()` y luego itera sobre cada país para obtener su imagen de bandera correspondiente usando `fetchFlagImage(from:)`. El método devuelve una matriz de tuplas, cada una de las cuales contiene un objeto "País" y una "UIImage" opcional de la bandera. Cualquier error encontrado durante el proceso se propaga a la pila de llamadas. Además, `APIRequestController` proporciona un método llamado `fetchCountryByName(_ name: String)`, que facilita la recuperación de información del país por nombre. Construye la URL para la solicitud de API, maneja la codificación de URL y decodifica la respuesta JSON en una matriz de objetos "País". En caso de errores, como una URL con formato incorrecto o un código de estado de respuesta HTTP distinto de 200, se generan instancias de "URLError" apropiadas. |
| `NetworkMonitor.swift` | `AllCountriesTableViewController` es una clase que gestiona la visualización de países y su información en una tabla. Obtiene datos del país, incluidas imágenes, y actualiza la interfaz de usuario en consecuencia. En el método `viewDidLoad()`, el controlador comienza a monitorear los cambios de la red y carga los datos iniciales usando `loadData()`. Este método recupera imágenes y datos de países de forma asincrónica, actualiza la interfaz de usuario con los datos obtenidos o muestra un mensaje de error si falla la recuperación de datos. El método `updateUI(with:)` actualiza la interfaz de usuario de la vista de tabla con los datos del país obtenidos, recargando la tabla para mostrar los nuevos datos. El método `showAlert(title:message:)` muestra una alerta con un título y mensaje específicos. En `tableView(_:cellForRowAt:)`, el controlador configura las celdas en función de si hay datos disponibles o no. Si no hay datos disponibles, configura la celda para mostrar información predeterminada no disponible. `tableView(_:willSelectRowAt:)` permite la selección de filas solo si hay una conexión a Internet y los datos no se cargan. En el método `prepare(for:sender:)`, el controlador se prepara para la transición a `DetailCountryViewController`, pasando el país seleccionado y su imagen si hay una conexión a Internet y los datos no se cargan. El método `observeNetworkChanges()` configura un controlador de cambios de estado de la red para responder a los cambios de conectividad, actualizando la interfaz de usuario e intentando recargar datos cuando cambia el estado de la conexión. |

## Protocolo
| Clase | Descripción |
|----------------------------------|-------------- ------------------------------------------------|
| `Protocolo de búsquedas recientes.swift` | El protocolo `RecentSearchesDelegate` define una interfaz estándar para manejar eventos de selección de una lista de búsquedas recientes. Las clases que adoptan este protocolo deben implementar el método `didSelectRecentSearch(_:)`, que se llama cuando se selecciona una búsqueda reciente. El método toma una cadena de consulta de búsqueda como parámetro, que representa la consulta de búsqueda seleccionada. Este protocolo permite el desacoplamiento entre la interfaz de usuario y la lógica para manejar selecciones de búsqueda recientes, promoviendo la modularidad y la flexibilidad en el diseño. |


