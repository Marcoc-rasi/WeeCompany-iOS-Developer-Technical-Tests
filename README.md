# Countries
This application is a sophisticated iOS app designed for `searching` and displaying detailed information about `countries`. Here's a professional overview of its functionality:

# Core Features
- `Country Search`: Users can search for countries by name through a `UISearchBar` integrated into the navigation bar. The app supports iOS versions `11.0` and above with enhanced search capabilities, including a non-capitalization requirement for search inputs to improve user experience.
- `Recent Searches`: The app maintains a history of recent searches, allowing users to quickly revisit previous queries. This feature enhances usability by reducing the need to retype frequently searched terms.
- `Country Details Display`: Upon successful search, the app presents detailed information about the country, including its common name, official name, capital, currency, and flag. This information is dynamically loaded and displayed in a user-friendly interface.
- `Interactive Flag Viewing`: Users can interact with the country's flag image to access additional options, such as viewing the flag in full screen or opening it in Safari for a closer inspection.
- `Navigation and User Interaction`: The app employs modal transitions and segues to navigate between different views, including a recent searches view and a full-screen image viewer. It utilizes `UIAlertControllers` to provide feedback or actions to the user, such as the option to cancel or proceed with certain operations.

# Technical Highlights
- `Asynchronous Data Fetching`: The application leverages Swift's concurrency model to perform network requests asynchronously, fetching country details and flag images without blocking the UI thread. This approach ensures a smooth and responsive user experience.
- `Error Handling and User Feedback`: Through the use of try-catch blocks and `UIAlertControllers`, the app robustly handles errors (e.g., image loading failures or searches with no results) and informs the user appropriately, maintaining a high level of usability even when unexpected issues arise.
- `Adaptive UI Design`: The app includes considerations for different device types, such as implementing popover presentation controllers for iPads to ensure optimal layout and interaction patterns across all iOS devices.
- `Code Organization and Modularity`: The functionality is encapsulated within well-defined methods and extensions, following the principles of encapsulation and separation of concerns. This modularity facilitates code maintenance and future enhancements.


# Application Architecture

## Model
| Class                      | Description                                                  |
|----------------------------|--------------------------------------------------------------|
| `Country.swift`            | The `Country` struct represents the data model for a country's information, designed for easy encoding and decoding with the `Codable` protocol. It includes various properties such as `name`, `capital`, `currencies`, `flags`, and `maps`. **Name**: The nested `Name` struct stores both the common and official names of the country. **Currency**: The nested `Currency` struct represents the currency information of a country, including the name and optional symbol. **Flags**: The nested `Flags` struct holds URLs to the country's flag images, focusing on the PNG format. **Maps**: The `Maps` struct contains URLs to various mapping services, currently only storing the Google Maps URL. It's designed for potential expansion to include more mapping service URLs in the future. Through adherence to the `Codable` protocol, `Country` facilitates straightforward conversion between object and data formats, enabling seamless network data handling or local data storage. |
| `CountrySearch.swift`      | The `CountrySearch` class is a model designed to store information related to a country search operation. It implements the `Codable` protocol to enable easy encoding and decoding from and to data formats such as JSON, making it suitable for local storage or network transmission. This class contains a `countryNameSearched` property that stores the name of the searched country, facilitating the display of recent searches and the repetition of searches without the need to retype the country name. |
| `RecentSearchStorage.swift`| The `RecentSearchStorage` class serves as a utility for managing recent country searches, utilizing Property List (plist) files for storage and the `Codable` protocol for object encoding and decoding. It dynamically generates a URL for the plist file within the app's Documents directory. This class provides methods for both saving and loading recent searches. **Saving Recent Searches**: The `saveRecentSearches` method encodes an array of `CountrySearch` objects into a plist format and writes it to the specified location. In case of any error during this process, it provides informative error messages for debugging. **Loading Recent Searches**: The `loadRecentSearches` method retrieves an array of `CountrySearch` objects from the plist file. If the file doesn't exist or decoding encounters an error, it gracefully returns an empty array. Through these functionalities, `RecentSearchStorage` ensures efficient management and persistence of recent searches, contributing to enhanced usability and data integrity within the application. |

## View
| Class                      | Description                                                  |
|----------------------------|--------------------------------------------------------------|
| `AllCountriesTableViewCell`| The `AllCountriesTableViewCell` class is specifically designed to present detailed information about a country within a table view cell. It features outlets for various UI components such as labels and an image view to effectively showcase country data. The `awakeFromNib()` method performs any additional setup after loading the view, typically from a nib. The `setSelected(_:animated:)` method configures the view for the selected state, if necessary. The `update(with:image:)` method updates the cell's views with data from a specific country, including its flag image. It takes a `Country` object and the flag image as parameters. The `updateBad()` method configures the cell to indicate that information about the country is unavailable, typically called when there's an error fetching country data or when data is missing. Through these methods, `AllCountriesTableViewCell` facilitates the presentation of country information within a table view, ensuring a seamless and informative user experience. |

## Controller
| Class                                 | Description                                                  |
|---------------------------------------|--------------------------------------------------------------|
| `AllCountriesTableViewController.swift` | The `AllCountriesTableViewController` class manages the display of countries and their information in a table view. It fetches country data including images and updates the UI accordingly.  In the `viewDidLoad()` method, the controller starts monitoring network changes and loads initial data using the `loadData()` method.  The `loadData()` method fetches country data and images asynchronously, updating the UI with the fetched data or displaying an error message if data fetching fails.  The `updateUI(with:)` method updates the table view UI with the fetched country data, reloading the table view to display the new data.  The `showAlert(title:message:)` method displays an alert with a specified title and message.  In the `tableView(_:cellForRowAt:)` method, the controller configures the cells based on whether there is data available or not. If no data is available, it configures the cell to display default unavailable information.  The `tableView(_:willSelectRowAt:)` method allows selection of rows only if there is an internet connection and data is not loading.  In the `prepare(for:sender:)` method, the controller prepares for the segue to the `DetailCountryViewController`, passing the selected country and its image if there is an internet connection and data is not loading.  The `observeNetworkChanges()` method sets up a network status change handler to respond to connectivity changes, updating the UI and attempting to reload data when the connection status changes. |
| `DetailCountryViewController.swift`      | The `DetailCountryViewController` class is responsible for displaying detailed information about a selected country. It includes the country's common and official names, capital, currency, and an image. Additionally, there's a button to view the country's location on Google Maps.  In the `viewDidLoad()` and `viewWillAppear(_:)` methods, the UI elements are configured with the country's information, ensuring that labels are updated and the image view displays the country's image or a placeholder.  The `setupUI()` method updates the UI elements with the country's information, handling cases where data might be missing. It sets labels with the country's name, capital, and currency information. If available, it also sets the image view with the country's flag image; otherwise, it uses a default placeholder image.  The `mapsButtonTapped(_:)` method is triggered when the maps button is tapped. It attempts to open the country's location in Google Maps using the country's Google Maps URL.  The `imageTapped(_:)` method is triggered when the image is tapped. It presents an action sheet with options related to the country's image, such as opening the image in Safari or viewing it in fullscreen within the app.  The `prepare(for:sender:)` method prepares for the segue to the `FullscreenImageViewController`, passing the country image to be displayed in fullscreen mode. |
| `FindCountriesByNameViewController.swift` | The `FindCountriesByNameViewController` class manages the search and display of country information within a custom UIViewController. It contains outlets for UI elements to present country details and interactions like viewing maps. The class includes properties to store the found country details and recent search history.  In `viewDidLoad()`, recent searches are loaded, and a UISearchBar is configured either programmatically or through the navigationItem based on the iOS version. The `configureInitialState()` method sets the initial visual state of the UI.  The `searchBarSearchButtonClicked(_:)` method handles search button clicks, initiating a search with the provided text. The `performSearch(with:)` method asynchronously fetches country details based on the search text and updates the UI accordingly, handling errors and saving recent searches.  The `updateUI(with:)` method updates the UI with details of the found country, including its image. The `loadCountryImage(_:)` method asynchronously loads and displays the country's flag image from a URL.  The `imageViewTapped(_:)` method handles tap gestures on the country's flag image, presenting an action sheet with options to view the image in Safari or full screen. The `prepare(for:sender:)` method prepares for segues, passing data to destination view controllers.  The `showNoResultsAlert()` method displays an alert if no search results are found. The `recentsBarButtonTapped(_:)` method triggers a modal transition to the Recent Searches view controller when a bar button is tapped.  The `RecentSearchesDelegate` extension handles selections from the recent searches list, performing a search using the selected recent search term. |
| `FullscreenImageViewController.swift`    | The `FullscreenImageViewController` class is tailored to present an image in full-screen mode, allowing users to view it without distortion. It contains an outlet for an image view to display the image.  In `viewDidLoad()`, the passed image is assigned to the image view, and its content mode is set to `scaleAspectFit` to ensure proportional scaling without distortion. This configuration ensures that the image fits within the bounds of the view without stretching or squashing, providing a seamless full-screen viewing experience. |
| `RecentSearchesTableViewController.swift` | The `RecentSearchesTableViewController` class manages the display and interaction of a list showing recent country search queries. It includes an array `recentSearches` to store the names of recent searches and a `delegate` to handle selection actions on recent searches, conforming to `RecentSearchesDelegate` to communicate selection events back to the delegating view controller.   In `viewDidLoad()`, recent searches are loaded from storage, and if none exist, a default message is presented. The `loadRecentSearches()` method loads recent searches from persistent storage and maps them to a string array for display.  The table view data source methods (`tableView(_:numberOfRowsInSection:)` and `tableView(_:cellForRowAt:)`) are implemented to determine the number of rows needed in the table view and to configure each cell with the corresponding recent search string.  The table view delegate method `tableView(_:didSelectRowAt:)` handles the selection of a recent search, informing the delegate of the selected search and dismissing the view controller after a selection is made, assuming this view controller is presented modally.  Through these methods, `RecentSearchesTableViewController` provides a user-friendly interface for viewing and selecting recent country search queries. |

## Network
| Class                     | Description                                                  |
|---------------------------|--------------------------------------------------------------|
| `ApiRequest.swift`        | Class responsible for making network requests to fetch country data. |
| `NetworkMonitor.swift`    | Utility for monitoring the application's network connectivity. |

## Protocol
| Class                            | Description                                                  |
|----------------------------------|--------------------------------------------------------------|
| `RecentSearchesProtocol.swift`   | Defines a protocol for delegating the selection of recent searches to a view controller. |
